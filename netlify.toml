[build]
  command = "npm run build"
  publish = "dist"

# 1. Main Gemini Proxy (Clean Path)
[[redirects]]
  from = "/gemini-secure"
  to = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent"
  status = 200
  force = true
  query = {key = ":key"}

# 2. Debug Wildcard Proxy (To verify Netlify Wildcards)
[[redirects]]
  from = "/debug-api/*"
  to = "https://jsonplaceholder.typicode.com/:splat"
  status = 200
  force = true

# 3. Simple Ping Test
[[redirects]]
  from = "/ping"
  to = "https://www.google.com"
  status = 200
  force = true

# 4. SPA Catch-all (Must be last)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
